(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[247],{7014:function(n,r,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/use_swr_infinite",function(){return e(7615)}])},5951:function(n,r,e){"use strict";e.d(r,{C:function(){return t}});var i=e(5893),t=function(n){var r=n.users;return(0,i.jsx)("ul",{children:r.map((function(n){return(0,i.jsx)("li",{children:n.name},n.id)}))})}},7615:function(n,r,e){"use strict";e.r(r),e.d(r,{useUserList:function(){return f}});var i=e(5893),t=e(1664),u=e.n(t),s=e(5951),o=e(6874),c=e(3856),a=e(7294),d=function(n){return{resource:"users",page:n}},l=function(n){var r=n.page;return o._8.list({page:r})},f=function(){var n=(0,c.ZP)(d,l),r=n.data,e=n.error,i=n.size,t=n.setSize,u=n.mutate,s=(0,a.useMemo)((function(){return void 0===r?[]:r.reduce((function(n,r){return n.concat(r.users)}),[])}),[r]),o=!r&&!e,f=void 0!==r&&(0===r.length||void 0!==r[r.length-1].nextPage),h=o||i>0&&r&&"undefined"===typeof r[i-1],v=void 0!==e;return{users:s,loadMore:(0,a.useCallback)((function(){return t((function(n){return n+1}))}),[t]),hasMore:f,isLoadingInitialData:o,isLoadingMore:h,isError:v,refresh:(0,a.useCallback)((function(){return u()}),[u]),clear:(0,a.useCallback)((function(){return t(0)}),[t])}};r.default=function(){var n=f(),r=n.users,e=n.isError,t=n.hasMore,o=n.isLoadingInitialData,c=n.isLoadingMore,a=n.loadMore,d=n.clear,l=n.refresh;return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:(0,i.jsx)(u(),{href:"/users/create",children:(0,i.jsx)("a",{children:"\u65b0\u898f\u4f5c\u6210"})})}),(0,i.jsxs)("div",{children:[o?(0,i.jsx)("div",{children:"loading..."}):(0,i.jsxs)("div",{children:[(0,i.jsx)(s.C,{users:r}),t&&(0,i.jsx)("button",{onClick:a,disabled:c,children:"more"})]}),e&&(0,i.jsx)("div",{children:"error"}),(0,i.jsx)("button",{onClick:d,children:"clear"}),(0,i.jsx)("button",{onClick:l,children:"mutate"})]})]})}}},function(n){n.O(0,[192,874,774,888,179],(function(){return r=7014,n(n.s=r);var r}));var r=n.O();_N_E=r}]);